<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{componentes/head.html}"></head>
<body>
<div th:replace="~{componentes/navbar.html}"></div>

    <!-- Contenido principal -->
    <div class="container my-4">
        <h1 class="text-center mb-4">Gestión de Insumos</h1>

        <!-- Mensajes -->
        <div th:if="${success}" class="alert alert-success" role="alert">
            <span th:text="${success}"></span>
        </div>
        <div th:if="${error}" class="alert alert-danger" role="alert">
            <span th:text="${error}"></span>
        </div>

        <!-- Formulario -->
        <form id="formInsumo" class="mb-4"
              th:action="${insumo.id} != null ? @{/insumo/editar} : @{/insumo/agregar}"
              th:object="${insumo}" method="post" autocomplete="off">
            <div class="row g-2">
                <input type="hidden" th:field="*{id}" />
                <div class="col-md-3">
                    <input type="text" class="form-control" placeholder="Nombre del Insumo"
                           th:field="*{nombre}" required autofocus>
                    <div class="text-danger small" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}"></div>
                </div>
                <div class="col-md-3">
                    <select class="form-select" th:field="*{tipo}" required>
                        <option value="" disabled>Tipo de Insumo</option>
                        <option value="Alimentos">Alimentos</option>
                        <option value="Bebidas">Bebidas</option>
                        <option value="Otros">Otros</option>
                    </select>
                    <div class="text-danger small" th:if="${#fields.hasErrors('tipo')}" th:errors="*{tipo}"></div>
                </div>
                <div class="col-md-3">
                    <input type="number" class="form-control" placeholder="Cantidad"
                           min="0" th:field="*{stock}" required>
                    <div class="text-danger small" th:if="${#fields.hasErrors('stock')}" th:errors="*{stock}"></div>
                </div>
                <div class="col-md-2">
                    <select class="form-select" th:field="*{unidad}" required>
                        <option value="" disabled>Unidad</option>
                        <option value="kg">Kg</option>
                        <option value="L">L</option>
                        
                    </select>
                    <div class="text-danger small" th:if="${#fields.hasErrors('unidad')}" th:errors="*{unidad}"></div>
                </div>
                <div class="col-md-1 d-flex align-items-center">
                    <button type="submit" class="btn btn-success w-100 me-1" th:if="*{id} == null"><i class="fa fa-plus"></i> Agregar</button>
                    <button type="submit" class="btn btn-primary w-100 me-1" th:if="*{id} != null"><i class="fa fa-save"></i> Actualizar</button>
                    <a th:if="*{id} != null" th:href="@{/insumo}" class="btn btn-secondary w-100"><i class="fa fa-times"></i> Cancelar</a>
                </div>
            </div>
        </form>

        <!-- Tabla de insumos -->
        <table class="table table-striped table-hover shadow-sm">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Nombre</th>
                    <th>Tipo</th>
                    <th>Stock</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="insumo : ${insumos}">
                    <td th:text="${insumo.id}">1</td>
                    <td th:text="${insumo.nombre}">Nombre</td>
                    <td th:text="${insumo.tipo}">Tipo</td>
                    <td><span th:text="${insumo.stock}"></span> <span th:text="${insumo.unidad}"></span></td>
                    <td>
                        <a th:href="@{'/insumo/editar/' + ${insumo.id}}" class="btn btn-warning btn-sm me-2"><i class="fa fa-edit"></i> Editar</a>
                        <a th:href="@{'/insumo/eliminar/' + ${insumo.id}}" class="btn btn-danger btn-sm"
                           onclick="return confirm('¿Seguro que deseas eliminar este insumo?');"><i class="fa fa-trash"></i> Eliminar</a>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    
</body>
<div th:replace="~{componentes/footer.html}"></div>
</html>
